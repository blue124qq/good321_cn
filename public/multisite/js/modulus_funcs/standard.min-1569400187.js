window.nativeAlert=window.alert;window.alert=function(c,b,d){site_alert(c,b);var e=new Date();if(typeof(d)!=="undefined"){var a=nativeAlert(d)}};window.ajax_vars=[];window.modconn_sess_id=get_modconn_sess_id();function login_box(a){try{$modulus.siteEntry().openLoginBox(a)}catch(a){$modulus.error(a,"openLoginBox not ready to be called!")}}function _JM_SignUpBox(a){try{$modulus.siteEntry().openSignUpBox(a)}catch(b){$modulus.error(b,"openSignUpBox not ready to be called!")}}function _JM_FacebookLogin(){try{$modulus.getFacebookLoginUrl(function(b){window.location.href=b})}catch(a){$modulus.error(a,"JM facebook login url not fetching")}}function _JM_LoginBox(a){try{$modulus.siteEntry().openLoginBox(a)}catch(b){$modulus.error(b,"openLoginBox not ready to be called!")}}function _JM_CoregSignUpBox(a){try{$modulus.siteEntry().openSudoSignUpBox(a)}catch(b){$modulus.error(b,"openSudoSignUpBox not ready to be called!")}}function sudo_sign_up_box(b,a){try{$modulus.siteEntry().openSudoSignUpBox(b,a)}catch(c){$modulus.error(c,"openSudoSignUpBox not ready to be called!")}}function sign_up_box(c,b,a){try{$modulus.siteEntry().openSignUpBox(c,b,a)}catch(d){$modulus.error(d,"openSignUpBox not ready to be called!")}}function get_modconn_sess_id(){var e=getCookie("modconn_sess_id");if(e==null){var d=[];var a="0123456789abcdef";for(var b=0;b<36;b++){d[b]=a.substr(Math.floor(Math.random()*16),1)}d[14]="4";d[19]=a.substr((d[19]&3)|8,1);d[8]=d[13]=d[18]=d[23]="-";var c=d.join("");setCookie("modconn_sess_id",c,3);return c}else{setCookie("modconn_sess_id",e,3);return e}}$.fn.isOnScreen=function(){var c=$(window);var a={top:c.scrollTop(),left:c.scrollLeft()};a.right=a.left+c.width();a.bottom=a.top+c.height();var b=this.offset();b.right=b.left+this.outerWidth();b.bottom=b.top+this.outerHeight();return(!(a.right<b.left||a.left>b.right||a.bottom<b.top||a.top>b.bottom))};function send_synchronous_form_data(c,b){var f=c.data("form");var e=$("#"+f).serialize();var a=c.data("module");var d=send_form_data(a,e,f,b);return d}function BrowserPrevent(a){if(typeof(a)==="undefined"||a===null){return false}if(a.preventDefault){a.preventDefault()}else{a.stop()}a.returnValue=false;a.stopPropagation()}$.fn.moduleOnSubmit=function(d,b,a,c){$(document).ready(function(){if(typeof(c)==="undefined"){c=true}if(typeof(d)==="undefined"){return false}var e="";if(typeof(a)==="undefined"){a=""}if(typeof(b)!=="undefined"){var e="#"+b}else{var e="#"+d+"_form"}if($(e).length!=0){$(e).unbind();$(e).submit(function(g){var f=$(e).serialize();send_form_data(d,f,e,g)})}})};function prepare_upload_formdata(b){var c=$("form#"+b);var a=new FormData(c[0]);return a}function append_upload_formdata(a,b,c){a.append(b,c);return a}function send_form_data(e,h,b,a,i,g,f,d){if(typeof(i)==="undefined"){i=false}if(i){var c=module_ajax_upload(e,h,d);event_handler(a)}else{var c=module_ajax(e,h,f,g,b,a,d);event_handler(a)}ajax_module_commands(c,b,a);return c}function pre_var_replacement(c){if(c!==null){if(typeof(c.ajax_vars)!="undefined"){for(var a in c.ajax_vars){if(c.ajax_vars.hasOwnProperty(a)){var b=c.ajax_vars[a];window.ajax_vars[a]=b}}}}}function fix_footer(){if($("#footer-outer").length!==0){var a=$("#footer-outer").height();$("#module_body").css("padding-bottom",a+100)}}function var_replacement(h){if(h!==null){var e=/%%(\w+)%%/g;for(var d in h){if(h.hasOwnProperty(d)){if(typeof(h[d])=="string"){var g=h[d];if(g.match(e)){var f;var c=0;var b=g;while((f=e.exec(g))){c++;var a=ajax_vars_get(f[1]);var b=b.replace(f[0],a);if(c>10){break}}h[d]=b}}}}}return h}function ajax_module_commands(f,d,b){pre_var_replacement(f);f=var_replacement(f);f=var_replacement(f);var h=module_error(f);if(h){event_handler(b)}module_error_display(h,d);var c=module_popup(f);if(c.content){event_handler(b)}module_popup_display(c.content,c.title,c.height,c.width,c["class"]);var e=false;var a=module_reload(f);if(a){event_handler(b);e=module_pixelpoint_code(f)}module_reload_page(a,e);var g=module_redirect(f);if(g){event_handler(b);e=module_pixelpoint_code(f)}module_redirect_page(g,e);if(f!==null&&typeof(f.console_log)!=="undefined"){$modulus.log(f.console_log)}var i=module_focus(f);window.focused=false;if(i){window.focused=true;event_handler(b);setTimeout(function(){window.focus();$modulus.log("focus")},0)}if(a==false&&g==false){module_pixelpoint_code(f)}module_focus(f);module_callback(f)}function module_callback(resp){if(resp==null){return false}if(typeof(resp.eval)!="undefined"){eval(resp.eval)}if(typeof(resp.callback)==="undefined"){return false}if(typeof(resp.callback)!="undefined"){var delay=0;if(typeof(resp.callback_delay)!="undefined"){delay=resp.callback_delay}var arg=null;if(typeof(resp.callback_arg)!="undefined"){arg=resp.callback_arg}var fn=window[resp.callback];if(typeof fn==="function"){setTimeout(function(){fn.apply(null,arg)},delay)}}}function event_handler(a){BrowserPrevent(a)}function on_screen_message(a){if($(".on-screen-message").length!=0&&typeof(a)!=="undefined"){var a=a.replace(/<.*?>/g,"");if(typeof(window.speak)!=="undefined"){speaknow(a)}$(".on-screen-message").prepend("<li>"+a+"</li>");return true}return false}function module_error_display(a,c){if(typeof(c)==="undefined"){c="default"}if(a){var b=c+"_error";on_screen_message(a);if($(b).length!=0){$(b).fadeIn("slow");$(b).html("<ul>"+a+"</ul>")}else{$("<ul/>",{"class":"ajax_error",html:a}).prependTo(c)}}else{var b=c+"_error";if($(b).length!=0){$(b).fadeOut("slow");$(b).html("")}}}function module_reload_page(b,a){a=a||false;if(a&&b<2500){b=2500}if(b){setTimeout("document.location.reload(true);",b)}}function module_redirect_page(c,a){a=a||false;var b=750;if(a){b=2500}if(c){setTimeout(function(){window.location=c;$modulus.log("REDIRECTING"+c)},b)}}function ajax_vars_get(a){if(typeof(window.ajax_vars[a])!=="undefined"){a=window.ajax_vars[a]}return a}function module_popup_display(e,g,i,a,b){if(typeof(e)=="undefined"){return false}var f=e;var h=/%%(\w+)%%/;if(f.match(h)){var d=f.match(h);var c=ajax_vars_get(d[1]);f=f.replace(h,c)}e=f;on_screen_message(e);if(typeof(e)==="undefined"){e="Error"}if(typeof(g)==="undefined"){g=""}if(typeof(i)==="undefined"){i=350}if(typeof(a)==="undefined"){a=350}if(e){site_alert(e,b)}}function form_box(i,b,c){c=c||false;b=b||"";i=i||"NO FORM!";var h=$(window).height();var a=$(window).width();var d='<div id="site-alert-outer"></div>';$("body").append(d);var g='<div id="site-alert-close">Close <span>&#215;</span></div>';if(c){g=""}$("#site-alert-outer").html(g+'<div id="site-alert" class="'+b+'"><div id="site-alert-inner">'+i+"</div></div>");$("#site-alert-outer").show();$("#site-alert").addClass("active");var f=$("#site-alert").height();var e=(h-f)/3;$("#site-alert").css("margin-top",e+"px");$("#site-alert-close").click(function(){$("#site-alert-outer").unbind();$("#site-alert-outer").hide(700);setTimeout(function(){$("#site-alert-outer").remove()},1000)});return"#site-alert-outer"}function site_alert(e,d){if(typeof(d)=="undefined"){var d=""}var a=$(window).height();var c=$(window).width();var b='<div id="site-alert-outer"></div>';$("body").append(b);$("#site-alert-outer").html('<div id="site-alert-close">Close <span>&#215;</span></div><div id="site-alert" class="'+d+'"><div id="site-alert-inner">'+e+"</div></div>");$("#site-alert-outer").show();$("#site-alert").addClass("active");var g=$("#site-alert").height();var f=(a-g)/3;$("#site-alert").css("margin-top",f+"px");$("#site-alert-outer, #site-alert-close").click(function(){$("#site-alert-outer").unbind();$("#site-alert-outer").hide(700);setTimeout(function(){$("#site-alert-outer").remove()},1000)})}function setCookie(c,g,b,e){var e=e||"/";var f=new Date();f.setTime(f.getTime()+(b*60*60*1000));var a="expires="+f.toUTCString();document.cookie=c+"="+g+"; "+a+"; path="+e}function getCookie(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)==0){return f.substring(e.length,f.length)}}return null}function send_form_data_callback(c,a,d,b){return send_form_data(c,a,null,null,null,d,true,b)}function module_ajax(f,a,d,h,c,b,e){e=e||function(){};var g=false;if(typeof(h)!=="undefined"||(typeof(d)!="undefined"&&d==true)){g=$.ajax({type:"POST",url:"/ajax/"+f,data:a,async:true}).done(function(j){ajax_module_commands(j,c,b);if(typeof(h)!="undefined"){try{h(j)}catch(i){$modulus.log(i,f,a,h)}}}).error(function(i,k,j){$modulus.log(j);$modulus.log(k);$modulus.log(i);if(!$modulus.isObject(j)){j={}}j.modVerbose="\r\n text: \r\n"+k+"\r\n jqXHR: \r\n"+$modulus.jsonEncode(i)+" \r\n errorThrown: \r\n"+$modulus.jsonEncode(j);$modulus.error(j,"module_ajax");e(i,k,j)})}else{$.ajax({type:"POST",url:"/ajax/"+f,data:a,async:false,success:function(i){g=i;$modulus.log(i)},error:function(k,i,j){$modulus.log(k.responseText)}})}return g}function module_ajax_upload(c,a,b){b=b||function(){};var d=false;$.ajax({type:"POST",url:"/ajax/"+c,data:a,async:false,cache:false,contentType:false,processData:false,success:function(e){d=e;$modulus.log(e);ajax_module_commands(e)},error:function(g,e,f){$modulus.log(g.responseText);b(f)}});return d}function module_focus(a){if(a==null){return false}if(typeof(a.ajax_focus)==="undefined"){return false}return a.ajax_focus}function module_reload(a){if(a==null){return false}if(typeof(a.ajax_reload)==="undefined"){return false}return a.ajax_reload}function module_redirect(a){if(a==null){return false}if(typeof(a.ajax_redirect)==="undefined"){return false}return a.ajax_redirect}function module_error(a){if(a==null){return false}if(typeof(a.ajax_error)==="undefined"){return false}return a.ajax_error}function module_pixelpoint_code(a){if(a==null){return false}if(typeof(a.pixelpoint_code)==="undefined"){return false}$("body").append(a.pixelpoint_code);$modulus.log(a.pixelpoint_code);return a.pixelpoint_code}function module_popup(b){if(b==null){return false}var a={};if(typeof(b.ajax_popup)!=="undefined"){a.content=b.ajax_popup}a.height=null;if(typeof(b.ajax_popup_height)!=="undefined"){a.height=b.ajax_popup_height}if(typeof(b.ajax_popup_width)!=="undefined"){a.width=b.ajax_popup_width}a.title=null;if(typeof(b.ajax_popup_title)!=="undefined"){a.title=b.ajax_popup_title}a["class"]=null;if(typeof(b.ajax_popup_class)!=="undefined"){a["class"]=b.ajax_popup_class}return a}function active_expand(a){var b=a.data("active");$modulus.log(b);if(b!==null&&b==1){a.removeClass("active");a.data("active",0)}if(b!==null&&b==0){a.addClass("active");a.data("active",1)}}$(document).ready(function(){$(window).keydown(function(a){if((a.which==79&&a.ctrlKey)){BrowserPrevent(a);$("body *").addClass("design");setTimeout("$('body *').removeClass('design');",10000);return false}})});function modulusPageTools(){$(document).ready(function(){var a;$(".debug_tip").unbind();$(".debug_tip").mouseenter(function(){var b=$(this).data("tip");a=setTimeout(function(){$modulus.log(b);if(typeof(b)!="undefined"&&b!=""){$modulus.log(b)}},500)}).mouseleave(function(){clearTimeout(a)});$(".ajax-function").unbind();$(".ajax-function").click(function(c){var b=$(this);ajax_function(b,c)});$(".open").unbind();$(".open").click(function(c){BrowserPrevent(c);var b=$(this);var d=b.data("open");$("#"+d).show();active_expand(b)});$(".slide-open").unbind();$(".slide-open").click(function(c){BrowserPrevent(c);var b=$(this);var d=b.data("open");$("#"+d).slideDown();active_expand(b)});$(".close").unbind();$(".close").click(function(c){BrowserPrevent(c);var b=$(this);var d=b.data("close");$("#"+d).hide();active_expand(b)});$(".slide-close").unbind();$(".slide-close").click(function(c){BrowserPrevent(c);var b=$(this);var d=b.data("close");$("#"+d).slideUp();active_expand(b)});$(".slide-toggle").unbind();$(".slide-toggle").click(function(c){BrowserPrevent(c);var b=$(this);var d=b.data("toggle");$("#"+d).slideToggle();active_expand(b)});$(".menu-toggle").unbind();$(".menu-toggle").click(function(d){BrowserPrevent(d);var c=$(this);var e=c.data("menu_items");$("#"+e).css("z-index","40000");$("#"+e).css("position","static");var b=e+"-caret";if($("#"+b).length==0){$("#"+e).before('<div id="'+b+'" class="drop-caret"></div>')}else{setTimeout(function(){$("#"+b).remove()},200)}$("#"+e).slideToggle("fast");active_expand(c);$("#"+e).mouseleave(function(){$("#"+e).slideToggle("fast");active_expand(c);$("#"+e).unbind();setTimeout(function(){$("#"+b).remove()},200)})});$(".toggle").unbind();$(".toggle").click(function(c){BrowserPrevent(c);var b=$(this);var d=b.data("toggle");$("#"+d).toggle();active_expand(b)});$(".copy-over").unbind();$(".copy-over").keyup(function(){var b=$(this);var d=b.data("copy");var c=b.val();$("#"+d).val(c)})})}modulusPageTools();var $_GET=getQueryParams(document.location.search);function getQueryParams(a){try{a=a.split("+").join(" ");var f={},d,b=/[?&]?([^=]+)=([^&]*)/g;while(d=b.exec(a)){f[decodeURIComponent(d[1])]=decodeURIComponent(d[2])}return f}catch(c){console.log(c)}return{}}function style_dob_input(i,b){b=b||false;i=i||"#date_of_birth-outerdiv";var e=$(i+" #date_of_birth");if(!(e.length>0)){return}if(!b){if(($modulus.isset(e.data("force-display")))&&e.data("force-display")==1){$modulus.log("Date of Birth is Required to Sign Up to Site as There is an age limit!",i);$("#date_of_birth-outerdiv").show()}}var d='<div id="dob_wrapper">';var h=e.is(":required");var j=get_dob_select("day",h);d+=j;var a=get_dob_select("month",h);d+=a;var k=get_dob_select("year",h);d+=k;d+='<div style="display: block; width: 100%; height: 1px; clear: both;"></div>';d+="</div>";e.before(d);var c=$("#date_of_birth_day");var g=$("#date_of_birth_month");var f=$("#date_of_birth_year");if(h){c.attr("required",true);g.attr("required",true);f.attr("required",true)}else{c.removeAttr("required");g.removeAttr("required");f.removeAttr("required")}e.hide();$(i).css({position:"relative"});$(i+" #dob_wrapper").css({position:"relative"});setDobSelectValueToInputValue();e.change(setDobSelectValueToInputValue);$(i+" select").change(setDobInputValueToSelectValue)}function setDobSelectValueToInputValue(){var a=$("#date_of_birth");if(a.length==0){return}var f=a.val();var c=$("#date_of_birth_day");var d=$("#date_of_birth_month");var b=$("#date_of_birth_year");if(!(c.length>0&&d.length>0&&b.length>0)){return}if(typeof f!="undefined"&&f!=null&&f.length>0){var e=f.split("-");if(typeof e[0]!="undefined"&&e[0].length>0){b.val(e[0])}if(typeof e[1]!="undefined"&&e[1].length>0){if(e[1].length<2){e[1]="0"+e[1]}d.val(e[1])}if(typeof e[2]!="undefined"&&e[2].length>0){if(e[2].length<2){e[2]="0"+e[2]}c.val(e[2])}}}function setDobInputValueToSelectValue(){var b=$("#date_of_birth");var e=$("#date_of_birth_day");var g=$("#date_of_birth_month");var c=$("#date_of_birth_year");var d=e.val();var h=g.val();var f=c.val();if(d==null){d="00"}if(h==null){h="00"}if(f==null){f="0000"}var a=f+"-"+h+"-"+d;if(a!="0000-00-00"){b.val(a)}}function get_dob_select(g,e){var a="date_of_birth_"+g;var d="";if(e){d="required"}var i="";switch(g){case"day":i+="display: block;float: left;min-width: 1px !important; clear: none !important;";i+="width: 25% !important;";i+="margin-left: 0px !important;";break;case"month":i+="display: block;float: left;min-width: 1px !important; clear: none !important;";i+="width: 45% !important;";i+="margin-left: 1% !important;";break;case"year":i+="display: block;float: left;min-width: 1px !important; clear: none !important;";i+="width: 28% !important;";i+="margin-left: 1% !important;";break}var j='<select id="'+a+'" style="'+i+'" data-type="'+g+'" '+d+">";switch(g){case"year":j+='<option value="" disabled selected>Year</option>';var f=new Date().getFullYear();for(var h=0;h<=100;h++){var c=f-h;j+='<option value="'+c+'">'+c+"</option>"}break;case"month":j+='<option value="" disabled selected>Month</option>';j+='<option value="01">January</option><option value="02">February</option><option value="03">March</option><option value="04">April</option><option value="05">May</option><option value="06">June</option><option value="07">July</option><option value="08">August</option><option value="09">September</option><option value="10">October</option><option value="11">November</option><option value="12">December</option>';break;case"day":j+='<option value="" disabled selected>Day</option>';for(var h=1;h<32;h++){var b=""+h;if(b.length==1){b="0"+h}j+='<option value="'+b+'">'+b+"</option>"}break}j+="</select>";return j}function fix_pixel(a,c){var d=a.attr("src");if(typeof d=="undefined"){d=""}var b=(d.indexOf(c)>=0);if(b){$modulus.log("hiding pixel",a);a.hide()}}function fix_pixels(a){a=a||"googleadservices.com";$("img").each(function(){var b=$(this);fix_pixel(b,a)})}function init_dynamic_height(){setTimeout(function(){dynamic_height();$(window).resize(function(){dynamic_height()})},0)}function dynamic_height(){var b=20;var a=20;var d=$(window).width();var c=0;$(".dynamic-height").each(function(){c++;var g=$(this);g.css({"box-sizing":"initial"});var e=g.find("div > div:first:visible").outerHeight(true);var h=g.data("margin-top");var i=g.data("mobile-margin-top");var n=g.data("tablet-margin-top");var k=g.data("margin-bottom");var l=g.data("mobile-margin-bottom");var f=g.data("tablet-margin-bottom");var m=b;var j=a;if(typeof(h)!=="undefined"){m=h}if(typeof(k)!=="undefined"){j=k}if(d<=700){if(typeof(i)!=="undefined"){m=i}if(typeof(l)!=="undefined"){j=l}}if(d>700&&d<=960){if(typeof(n)!=="undefined"){m=n}if(typeof(f)!=="undefined"){j=f}}g.css("padding-top",m+"px");g.css("padding-bottom",j+"px");g.css("min-height",e+"px")})}function select_text(b){var d=document;var e=d.getElementById(b);if(d.body.createTextRange){var a=d.body.createTextRange();a.moveToElementText(e);a.select()}else{if(window.getSelection){var c=window.getSelection();var a=d.createRange();a.selectNodeContents(e);c.removeAllRanges();c.addRange(a)}}}window.modconn_close_functions=new Array;window.modconn_connected=false;function init_websocket(){if(typeof(window.modconn)=="object"&&window.modconn_connected==false){$modulus.log("trigger websocket close!");window.modconn.close()}window.modconn_connected=false;"use strict";window.WebSocket=window.WebSocket||window.MozWebSocket;if(!window.WebSocket){console.log("WEB SOCKETS NOT SUPPORTED");return}if(window.modconn_modules.length==0||typeof(window.preloading_from_parent)!="undefined"){$modulus.log("Websockets not required!");websocket_close_functions();return}if(location.protocol==="https:"){window.modconn=new WebSocket("wss://"+window.ws_url+":"+(parseInt(window.ws_port)+1))}else{window.modconn=new WebSocket("ws://"+window.ws_url+":"+window.ws_port)}window.modconn.onopen=function(b){window.modconn_connected=true;if(typeof(window.reconnect_websocket)=="number"){clearInterval(window.reconnect_websocket)}if(window.user_logged_in){var c="user";var d=window.user_id}else{var c="visitor";var d=window.modconn_sess_id}var a={user_id:d,modules:window.modconn_modules,area:c,sign:true};$modulus.log("Connection established!");window.modconn.send(JSON.stringify(a))};window.modconn.onclose=function(a){close_websocket(a)};window.modconn.onerror=function(a){$modulus.log(a);$modulus.log("Connection Error!");window.modconn_connected=false};window.modconn.onmessage=function(a){var b=JSON.parse(a.data);module_callback(b)}}window.init_modconn_try_count=0;function close_websocket(a){$modulus.log(a);$modulus.log("Connection closed!");window.modconn_connected=false;if(typeof(window.reconnect_websocket)=="number"){clearInterval(window.reconnect_websocket)}window.reconnect_websocket=setInterval(function(){if(window.modconn_connected==false&&window.init_modconn_try_count<20){$modulus.log("try init websocket!");init_websocket();window.init_modconn_try_count++}else{clearInterval(window.reconnect_websocket)}},10000);websocket_close_functions()}function websocket_close_functions(){window.modconn_close_functions.map(function(b){$modulus.log("close function: "+b);var a=window[b];if(typeof a==="function"){a.apply()}})}function clearUsername(){$('input[name="username"]').val("");setTimeout(function(){$('input[name="username"]').focus()},2000)};