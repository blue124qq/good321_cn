function ModulusFuncs(){this.errorsSent=0;this.restrictedWidth=0;if(this.isset(window.modulus_content_folder)){this.contentFolder="/public/"+window.modulus_content_folder;this.imageFolder=this.contentFolder+"/images"}if(this.isset(window.modulus_environment)){this.environment=window.modulus_environment}else{this.environment="production"}if(typeof(window.console)==="object"){var a=console;this.originalConsole=a}else{this.originalConsole=false}this.loadedScripts=[];this.loadingScripts=[];this.functionScriptLoadedCallbacks=[];this.executedCallbackIds=[];this.callOnceIds=[];this.fixedCollisionIds=[];this.localStorageTimeSchema=[];this.localStorageAccessDenied=false;this.userStatusServerChecked=false;this.userId=false;this.userLoggedIn=false;this.contentCatsData=false;this.fixingHeight=false;this.init();Object.defineProperty(this,"userId",{writable:false,value:this.userId});Object.defineProperty(this,"userLoggedIn",{writable:false,value:this.userLoggedIn})}ModulusFuncs.prototype.stringGen=function(b,d){var c="";d=d||"abcdefghijklmnopqrstuvwxyz0123456789";for(var a=0;a<b;a++){c+=d.charAt(Math.floor(Math.random()*d.length))}return c};ModulusFuncs.prototype.getImageFolder=function(){if(this.isset(this.imageFolder)){this.imageFolder=this.imageFolder.replace("//","/");return this.imageFolder}return false};ModulusFuncs.prototype.init=function(){this.setterLock=false;if(!this.userStatusServerChecked){this.userLoggedIn=false;if(this.isset(window.user_logged_in)){this.userLoggedIn=window.user_logged_in}this.userId=0;if(this.isset(window.user_id)){this.userId=window.user_id}}this.setterLock=true;this.fixHtmlHeight()};ModulusFuncs.prototype.getRestrictedWidth=function(){return this.restrictedWidth};ModulusFuncs.prototype.getUserId=function(b){this.init();b=b||false;if(b){var a=this;this.ajaxCallback("members_module","function=get_user_id",function(c){Object.defineProperty(a,"userId",{writable:true,value:a.userId});Object.defineProperty(a,"userLoggedIn",{writable:true,value:a.userLoggedIn});a.setterLock=false;if(a.isset(c.user_id)){a.userStatusServerChecked=true;a.userId=c.user_id;if(a.userId){a.userLoggedIn=true}else{a.userLoggedIn=false}if(a.isFunction(b)){b(c.user_id)}}Object.defineProperty(a,"userId",{writable:false,value:a.userId});Object.defineProperty(a,"userLoggedIn",{writable:false,value:a.userLoggedIn})})}return this.userId};ModulusFuncs.prototype.isUserLoggedIn=function(a){this.init();a=a||false;if(a){this.getUserId(a)}return this.userLoggedIn};ModulusFuncs.prototype.isKeepLoggedIn=function(){var a=this.getCookie("keep_loaded");if(a==null){return false}return a};ModulusFuncs.prototype.setCookie=function(b,c,a,d){return window.setCookie(b,c,a,d)};ModulusFuncs.prototype.getCookie=function(a){return window.getCookie(a)};ModulusFuncs.prototype.getGetVars=function(a){a=a||false;var b=this;if(a){var c={};Object.keys(window.$_GET).forEach(function(d){var e=window.$_GET[d];if(b.isset(e)&&(!e.match(a))){c[d]=e}});return c}return window.$_GET};ModulusFuncs.prototype.getGetVar=function(b){var a=this.getGetVars();if(this.isset(a[b])){return a[b]}return false};ModulusFuncs.prototype.isset=function(a){if(typeof(a)!="undefined"){if(a===null){return false}return true}return false};ModulusFuncs.prototype.defaultTo=function(b,a){a=a||false;if(this.isset(b)){return b}return a};ModulusFuncs.prototype.getCurrency=function(a){a=a||"code";switch(a){case"code":if(this.isset(window.currency_code)){return window.currency_code}break;case"symbol":if(this.isset(window.currency)){return window.currency}break;case"html":if(this.isset(window.currency_html)){return window.currency_html}break}return false};ModulusFuncs.prototype.getContent=function(a){if(this.isset(window.ajax_vars)){if(typeof(window.ajax_vars[a])==="string"){return window.ajax_vars[a]}}return false};ModulusFuncs.prototype.setContent=function(b,c,a){a=a||false;if(this.isset(window.ajax_vars)){if(this.isset(window.ajax_vars[b])&&a){return window.ajax_vars[b]=c}else{if(!this.isset(window.ajax_vars[b])){return window.ajax_vars[b]=c}}}return false};ModulusFuncs.prototype.siteAlert=function(b,a){$(document).ready(function(){if(typeof(window.site_alert)==="function"){window.site_alert(b,a)}else{alert(b)}})};ModulusFuncs.prototype.getAjaxVar=function(a){return this.getContent(a)};ModulusFuncs.prototype.closeSiteAlert=function(){$("#site-alert-outer").remove()};ModulusFuncs.prototype.formBox=function(b,a,c){if(this.functionExists(window.form_box)){return window.form_box(b,a,c)}};ModulusFuncs.prototype.fixIdCollisions=function(b){var a=false;if($(b).length!==0){a=b.replace("#","")+"_"+this.stringGen(4);$(b).attr("id",a);this.fixedCollisionIds[a]=b}return a};ModulusFuncs.prototype.unfixIdCollisions=function(d){var a="#"+d;if($(a).length!==0&&this.isset(this.fixedCollisionIds[d])){var c=this.fixedCollisionIds[d];var b=c.replace("#","");$(a).attr("id",b);delete (this.fixedCollisionIds[d]);return true}return false};ModulusFuncs.prototype.ajaxSubmitForm=function(d,a,c,b){if(this.functionExists(window.send_form_data)){return window.send_form_data(d,a,c,b)}else{this.error("standard.js not loaded","Standard Missing!")}};ModulusFuncs.prototype.ajaxUploadCallback=function(a,f,g,h,c,e){h=h||function(){};e=e||function(){};var d=g;if(d instanceof HTMLFormElement){d=d}else{if(d[0] instanceof HTMLFormElement){d=d[0]}else{this.siteAlert("Unable to upload form","warning")}}c=c||function(k,l){var j=Math.round((l/k)*100);$(d).find(".modulus-upload-progress").text(j+"% Uploaded")};var b=new FormData(d);b.append("function",f);var i=this;$.ajax({url:"/ajax/"+a,type:"POST",data:b,cache:false,contentType:false,processData:false,xhr:function(){var j=$.ajaxSettings.xhr();if(j.upload){j.upload.addEventListener("progress",function(k){if(k.lengthComputable){c(k.total,k.loaded,k)}},false)}return j}}).done(function(k){ajax_module_commands(k);if(typeof(h)!="undefined"){try{h(k)}catch(j){$modulus.log(j,module_name,formdata,h)}}}).error(function(j,l,k){i.log(k);i.log(l);i.log(j);if(!i.isObject(k)){k={}}k.modVerbose="\r\n text: \r\n"+l+"\r\n jqXHR: \r\n"+i.jsonEncode(j)+" \r\n errorThrown: \r\n"+i.jsonEncode(k);i.error(k,"ajaxUploadCallback");e(j,l,k)})};ModulusFuncs.prototype.ajaxCallback=function(c,a,d,b){if(this.functionExists(window.send_form_data_callback)){return window.send_form_data_callback(c,a,d,b)}};ModulusFuncs.prototype.browserPrevent=function(a){if(typeof(window.BrowserPrevent)==="function"){return window.BrowserPrevent(a)}return false};ModulusFuncs.prototype.magpieRecordClicks=function(a){if(typeof(window.record_clicks)==="function"){return window.record_clicks(a)}return false};ModulusFuncs.prototype.magpieScanPage=function(a){if(typeof(window.magpie_scan_page)==="function"){return window.magpie_scan_page(a)}return false};ModulusFuncs.prototype.addressLookup=function(a,c){c=c||function(){};var b="function=get_address&postcode="+a;this.ajaxCallback("account_module",b,function(f){var e=f.address_data||false;var d=f.pick_address||false;c(e,d)})};ModulusFuncs.prototype.getFacebookLoginUrl=function(d,b){var a=this;b=b||window.location.href;d=d||function(e){a.log(e)};if(!this.isset(this.fbLoginUrl)){this.fbLoginUrl={}}if(this.isset(this.fbLoginUrl[b])){d(this.fbLoginUrl[b]);return}var c="function=get_facebook_login&redirect="+this.encodeURIComponent(b,/fbauto=1&|fbauto=1/);this.ajaxCallback("sign_up_module",c,function(e){if((a.isset(e.fb_login_url))){a.fbLoginUrl[b]=e.fb_login_url;d(e.fb_login_url)}else{a.error("Facebook Login url not working!","Facebook Login url not working!")}})};ModulusFuncs.prototype.autoFacebookSignUp=function(){if(this.getGetVar("fbauto")){if(!this.isUserLoggedIn()){this.siteAlert("Signing up with Facebook!")}this.getFacebookLoginUrl(function(a){window.location.href=a})}};ModulusFuncs.prototype.encodeURIComponent=function(b,a){a=a||false;if(a){b=b.replace(a,"")}return encodeURIComponent(b).replace(/[!'()*]/g,function(d){return"%"+d.charCodeAt(0).toString(16)})};ModulusFuncs.prototype.validateMobile=function(a,c){c=c||function(){};var b="function=validate_mobile&mobile="+encodeURIComponent(a);this.ajaxCallback("account_module",b,function(f){var e=f.valid||false;var d=f.phone||a;c(e,d)})};ModulusFuncs.prototype.validateLandline=function(a,c){c=c||function(){};var b="function=validate_landline&landline="+encodeURIComponent(a);this.ajaxCallback("account_module",b,function(f){var e=f.valid||false;var d=f.phone||a;c(e,d)})};ModulusFuncs.prototype.setEnvironment=function(a){a=a||"development";this.environment=a};ModulusFuncs.prototype.getEnvironment=function(){return this.environment};ModulusFuncs.prototype.doContentReplacements=function(b){b=b||"";var a={};a.str=b;a=window.var_replacement(a);return a.str};ModulusFuncs.prototype.windowWidthRestrict=function(b,d){if(!this.isset(d)){d=true}b=b||480;this.restrictedWidth=b;if(typeof(window.widthJMRestrict)==="function"&&typeof(window.jellymouldWidthRestrictSet)!="undefined"){if(window.jellymouldWidthRestrictSet>b){this.log("Window Width Restrict is being handled by Jelly Mould!");return false}}else{this.log("Window Restrict:"+b)}var a=this;if(/Android|webOS|iPhone|iPod|BlackBerry|AppleWebKit/i.test(navigator.userAgent)){var e=(jQuery(window).width()<window.screen.width)?jQuery(window).width():window.screen.width;var f=b;var c=e/f;if(e<b){jQuery("#viewport").attr("content","initial-scale="+c+", minimum-scale="+c+", user-scalable=yes, maximum-scale="+c+", width="+f)}else{jQuery("#viewport").attr("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")}}window.removeEventListener("orientationchange",a.orientationChanged);window.addEventListener("orientationchange",a.orientationChanged,false);if(d){window.removeEventListener("resize",a.windowResized);window.addEventListener("resize",a.windowResized,false)}};ModulusFuncs.prototype.windowResized=function(){if(typeof window.$modulus.windowWidthRestrict==="function"){window.$modulus.windowWidthRestrict(window.$modulus.restrictedWidth,false)}};ModulusFuncs.prototype.orientationChanged=function(){if(typeof window.$modulus.windowWidthRestrict==="function"){window.$modulus.windowWidthRestrict(window.$modulus.restrictedWidth,false)}};ModulusFuncs.prototype.fixFooter=function(){if(typeof(window.fix_footer)==="function"){$(document).ready(function(){setTimeout(function(){window.fix_footer()},50)})}};ModulusFuncs.prototype.fixHtmlHeight=function(){if(this.fixingHeight){return}var a=this;a.fixingHeight=$(window).outerHeight();$(document).on("scroll",function(){var b=(a.fixingHeight+window.scrollY);$("html").css({height:b+"px"})})};ModulusFuncs.prototype.windowOpen=function(d,c,f,e){var b=this;var a=window.open(d,c,f,e);var g=function(){b.log("popupBlockerChecker")};g.prototype.fallback=function(i){this.fallbackCallback=i;return this};g.prototype.getPopup=function(){return a};g.prototype.check=function(j){var i=this;if(j){if(/chrome/.test(navigator.userAgent.toLowerCase())){setTimeout(function(){i._is_popup_blocked(i,j)},200)}else{j.onload=function(){i._is_popup_blocked(i,j)}}}else{i._displayError()}};g.prototype._is_popup_blocked=function(i,j){if((j.innerHeight>0)==false){i._displayError()}};g.prototype._displayError=function(i){b.log("pop up blocked!");i=i||"Popup Blocker is enabled! Please add this site to your exception list.";if(b.isFunction(this.fallbackCallback)){this.fallbackCallback(d,c,f,e)}else{b.siteAlert(i,"warning")}};var h=new g();setTimeout(function(){h.check(a)},20);return h};ModulusFuncs.prototype.setSiteAlert=function(a){if(typeof(a)==="function"){window.site_alert=a}};ModulusFuncs.prototype.setFixFooter=function(a){if(typeof(a)==="function"){window.fix_footer=a}};ModulusFuncs.prototype.functionExists=function(a){if(typeof(a)==="function"){return true}return false};ModulusFuncs.prototype.isFunction=function(a){return this.functionExists(a)};ModulusFuncs.prototype.isObject=function(a){return(typeof(a)==="object")};ModulusFuncs.prototype.isArray=function(a){return(typeof(a)==="array")};ModulusFuncs.prototype.isString=function(a){return(typeof(a)==="string")};ModulusFuncs.prototype.getCallbackId=function(){if(!this.isset(this.uniqueCallbackId)){this.uniqueCallbackId=0}return this.uniqueCallbackId=this.uniqueCallbackId+1};ModulusFuncs.prototype.executeCallback=function(g){if(!g){return false}var i=g.callbackId;var h=g.callback;var f=g.funcName;var c=g.className;if(this.executedCallbackIds.indexOf(i)==-1){this.executedCallbackIds.push(i);if((this.isset(c))&&c){var a=this.getFuncs(c);this.log(g);try{h(a)}catch(d){var b="syntax issue";if(this.isset(d.stack)){b=d.stack}this.error(b+"\r\n"+this.jsonEncode(h),"Syntax Error "+c)}}else{this.error("Missing -- "+c+"\n\r"+JSON.stringify(g),"Execute Callback Missing "+c)}}};ModulusFuncs.prototype.loadFunctionScript=function(a,h,f,d,b){h=h||function(){};b=b||false;f=f||false;var e={callback:h,callbackId:this.getCallbackId(),funcName:f,className:d};this.log(a,this.loadedScripts,this.loadingScripts);if(this.isset(this.loadedScripts[a])){e.loadedScripts=true;this.executeCallback(e);this.log("done callback because script already loaded!");return false}if(this.isset(this.loadingScripts[a])){if(!this.isset(this.functionScriptLoadedCallbacks[a])){this.functionScriptLoadedCallbacks[a]=[]}this.functionScriptLoadedCallbacks[a].push(e);this.log(this.functionScriptLoadedCallbacks[a],"LOADING - put in array",e);return false}this.log("Loading",a);if(this.isset(document)){this.log("document:",document.body);var c=document.createElement("script");c.type="text/javascript";var g=a;c.src="/public/multisite/js/modulus_funcs/"+g+this.unCachedFileEnd();if(!b){c.async=true}c.onload=function(){$modulus.functionScriptLoaded(a,e)};if(this.isset(document.body)){document.body.appendChild(c);this.loadingScripts[a]=true}else{if(this.isset(document.head)){document.head.appendChild(c);this.loadingScripts[a]=true}}}};ModulusFuncs.prototype.unCachedFileEnd=function(){var b=new Date();var a=b.getDate();var d=b.getMonth();var c=b.getHours();return"?time="+a+"-"+d+"-"+c};ModulusFuncs.prototype.loVine=function(d){d=d||function(){};if(this.isset(document)){var a=document.createElement("script");a.type="text/javascript";var c=atob("bmlnb2wubWluLmpz");var b=atob("aW5wdXRbdHlwZT0ic3VibWl0Il0=");$(b).prop("disabled",true);a.src="/public/multisite/js/"+c+this.unCachedFileEnd();a.async=true;a.onload=function(){d()};a.onerror=function(){window.location.reload()};if(this.isset(document.body)){document.body.appendChild(a)}else{if(this.isset(document.head)){document.head.appendChild(a)}}}};ModulusFuncs.prototype.loVine1=function(){var a=atob("Y3JmLXZhbHVlcw==");var c=atob("bG9naW5fbW9kdWxl");var d=atob("Y3JmX18=");var b=this;$modulus.ajaxCallback(c,{"function":a},function(e){if(b.isset(e[a])){$("#"+d).html(atob(e[a]));b.loVine()}})};ModulusFuncs.prototype.functionScriptLoaded=function(a,c){c=c||false;this.loadedScripts[a]=true;delete (this.loadingScripts[a]);this.log("LOADED!",a,c);if(c){c.finalCallAfterScriptLoad=true}this.executeCallback(c);if(this.isset(this.functionScriptLoadedCallbacks[a])){var b;for(b=0;b<this.functionScriptLoadedCallbacks[a].length;b++){this.functionScriptLoadedCallbacks[a][b].scriptLoaded=true;this.log("CALLBACK ARRAY",a,this.functionScriptLoadedCallbacks[a][b]);this.executeCallback(this.functionScriptLoadedCallbacks[a][b]);delete (this.functionScriptLoadedCallbacks[a][b])}delete (this.functionScriptLoadedCallbacks[a])}};ModulusFuncs.prototype.catchError=function(b){try{b()}catch(a){this.log(a)}};ModulusFuncs.prototype.error=function(b,c,f){f=f||null;var e={};var d="no mod verbose";if(this.isset(b.stack)){b=b.stack}if(this.isset(b.modVerbose)){d=b.modVerbose}if((this.isset(window.navigator)&&this.isset(window.navigator.userAgent))){b="User Agent:"+window.navigator.userAgent+"\n\r"+b+d}e.error=b;e.subject="JS Error: "+window.location.href+": "+c;e.recipient=f;var a=this;if(this.errorsSent>5){this.log("Max 5 errors sent!");return}this.errorsSent++;this.ajaxCallback("error","json_data="+JSON.stringify(e),function(){a.log(e.subject+" - sent!")});this.log(b)};ModulusFuncs.prototype.ready=function(b,f){f=f||function(){};try{var a=this.getFuncs(b,f);if(a){f(a)}}catch(d){var c="syntax issue";if(this.isset(d.stack)){c=d.stack}this.error(c+"\r\n"+this.jsonEncode(f),"Syntax Error "+b)}};ModulusFuncs.prototype.getFuncObjectName=function(a){return"m"+(a.substring(1))};ModulusFuncs.prototype.getScriptFile=function(b){var a=b.toLowerCase();a=a.replace("modulus","");if(this.getEnvironment()==="production"){return a.replace("funcs","")+"_funcs.min.js"}return a.replace("funcs","")+"_funcs.js"};ModulusFuncs.prototype.getFuncs=function(b,f){var d=window[b];var c=this.functionExists(d);var e=this.getFuncObjectName(b);if(c){if(typeof(this[e])==="object"){return this[e]}else{return this[e]=new d(this)}}else{if(typeof(f)==="function"){var a=this.getScriptFile(b);this.loadFunctionScript(a,f,e,b)}}return false};ModulusFuncs.prototype.loadClass=function(a,b){this.ready(a,b)};ModulusFuncs.prototype.callOnce=function(c,b){if(!this.isset(this.callOnceIds[c])){try{b(window);this.callOnceIds[c]=true}catch(a){this.log(c,a)}}else{this.log("CallOnce "+c+" : called again - NOT executed!",b)}};ModulusFuncs.prototype.jsonEncode=function(b){var a=JSON.stringify(b,function(d,c){if(typeof c==="function"){return c.toString()}return c});return a};ModulusFuncs.prototype.jsonDecode=function(b){var a=this;var c=JSON.parse(b,function(e,d){if(typeof d==="string"&&d.indexOf("function")!==-1){return a.compileFunction(d)}return d});return c};ModulusFuncs.prototype.compileFunction=function(e){var f=e.indexOf("("),c=e.indexOf(")");var d=e.substring(f+1,c);d=d.trim();var a=e.indexOf("{"),b=e.lastIndexOf("}");var e=e.substring(a+1,b);return Function(d,e)};ModulusFuncs.prototype.signUpReady=function(a){this.ready("ModulusSignUpFuncs",a)};ModulusFuncs.prototype.signUp=function(){try{return this.getFuncs("ModulusSignUpFuncs")}catch(a){this.error(a,"ModulusSignUpFuncs")}};ModulusFuncs.prototype.siteEntryReady=function(a){this.ready("ModulusSiteEntryFuncs",a)};ModulusFuncs.prototype.siteEntry=function(){try{return this.getFuncs("ModulusSiteEntryFuncs")}catch(a){this.error(a,"ModulusSiteEntryFuncs")}};ModulusFuncs.prototype.transactionReady=function(a){this.ready("ModulusTransactionFuncs",function(){$modulus.transaction().ready(function(){a()})})};ModulusFuncs.prototype.transaction=function(){try{return this.getFuncs("ModulusTransactionFuncs")}catch(a){this.error(a,"ModulusTransactionFuncs")}};ModulusFuncs.prototype.isFacebookApp=function(){var a=navigator.userAgent||navigator.vendor||window.opera;return(a.indexOf("FBAN")>-1||a.indexOf("FBAV")>-1||a.indexOf("FBBV")>-1||a.indexOf("FBDV")>-1)};ModulusFuncs.prototype.initImageHolders=function(){var b=this;var a=function(e){var d=e.data("original-image-src")||e.attr("src");e.data("original-image-src",d);var f=e.data("alt-image")||"/public/multisite/images/no_image.jpg";e.attr("src",f);e.data("image-loaded",0);if((typeof(window.contentOffer)==="object")&&b.functionExists(window.contentOffer.initPackery)){window.contentOffer.initPackery(true)}};var c=function(f){if(f.data("image-loaded")){return false}var d=new Image();var e=f.attr("src");if(f.data("original-image-src")){e=f.data("original-image-src")}d.addEventListener("error",function(){a(f)});d.addEventListener("load",function(){f.data("image-loaded",1)});d.src=e};$("img").each(function(){c($(this))})};ModulusFuncs.prototype.initSocialShare=function(){$(".socialButton").unbind();$(".socialButton").on("click",function(){var a=window.open($(this).attr("href"),"","height=350,width=600");if(window.focus){a.focus()}return false})};ModulusFuncs.prototype.showLoading=function(){if(this.functionExists(window.preload_bar)){window.preload_bar()}$("body").css({cursor:"progress"})};ModulusFuncs.prototype.hideLoading=function(){if(this.functionExists(window.remove_preload_bar)){window.remove_preload_bar()}$("body").css({cursor:"default"})};ModulusFuncs.prototype.setLocalStorageTimeSchema=function(c,b){c=c||"default";b=b||60;var a=b*60*1000;this.localStorageTimeSchema[c]=a};ModulusFuncs.prototype.isAndroid=function(){var a=navigator.userAgent.toLowerCase();var b=a.indexOf("android")>-1;return b};ModulusFuncs.prototype.isIphone=function(){var b=navigator.userAgent.toLowerCase();var a=b.indexOf("iphone")>-1;return a};ModulusFuncs.prototype.isChrome=function(){var b=navigator.userAgent.toLowerCase();var a=b.indexOf("chrome")>-1;return a};ModulusFuncs.prototype.setLocalStorage=function(a,g){if(this.localStorageAccessDenied){return false}try{if(this.isLocalStorageAvailable()){window.localStorage.setItem(a,g);var f=new Date();var c=f.getTime();window.localStorage.setItem(a+":timeSchema",c);return true}return false}catch(b){this.error(b,"Set Local Storage Issue");this.localStorageAccessDenied=true;if(this.isset(b.stack)){if(b.stack.match("exceeded the quota")){this.destroyAllLocalStorage()}}}return false};ModulusFuncs.prototype.isLocalStorageAvailable=function(){if(this.localStorageAccessDenied){return false}try{var a=this.isObject(window.localStorage);return a}catch(b){this.localStorageAccessDenied=true;this.log(b)}return false};ModulusFuncs.prototype.getLocalStorage=function(b,j){if(this.localStorageAccessDenied){return undefined}j=j||"default";if(this.isLocalStorageAvailable()){try{var a=true;if(this.isset(this.localStorageTimeSchema[j])){var i=new Date();var h=i.getTime();var g=window.localStorage.getItem(b+":timeSchema");g=parseInt(g);if(g!=null&&!isNaN(g)){a=false;if((g+this.localStorageTimeSchema[j])>h){a=true}}}var c=window.localStorage.getItem(b);if(c!=null&&a){return c}}catch(f){this.error(f,"Get Local Storage Issue");this.localStorageAccessDenied=true}}return undefined};ModulusFuncs.prototype.destroyLocalStorageTimeSchema=function(a){if(this.isset(this.localStorageTimeSchema[a])){delete (this.localStorageTimeSchema[a])}};ModulusFuncs.prototype.destroyAllLocalStorage=function(){try{window.localStorage.clear()}catch(a){this.error(a,"could not destroy local storage")}};ModulusFuncs.prototype.inIframe=function(){try{return window.self!==window.top}catch(a){return true}};ModulusFuncs.prototype.firePixel=function(b,a){a=a||false;var c=function(){var d="<div style='position:fixed;bottom: 0;left: 0;max-width:1px;max-height: 1px;'><img src='"+b+"' height='1' width='1' style='max-width:1px;max-height: 1px;'/></div>";$("body").append(d)};$(document).ready(function(){if(a==false){if($modulus.isUserLoggedIn()){c()}}else{c()}})};ModulusFuncs.prototype.sendApp=function(a){a=a||{};$(document).ready(function(){window.location="stapp://?"+JSON.stringify(a)})};ModulusFuncs.prototype.addContentCatsToAfter=function(d,f,g){d=d||"#main_nav .top";f=f||false;g=g||function(){$modulus.log("Cats added to Nav!")};var a={};var e="function=get-categories-nav&json_data="+JSON.stringify(a);var c=this;var b=function(h){if(c.contentCatsData==false){c.contentCatsData=h}$(d).after(h.categories_nav);if(f!==false){$(f).unbind("click");$(f).on("click",function(){$modulus.log("Cat Nav Item Clicked!");$(this).parent("li").find(".dropdown-outer").eq(0).slideToggle(150)})}if(typeof g=="function"){g()}};if(this.contentCatsData!==false){b(this.contentCatsData)}else{this.ajaxCallback("content_offer_module",e,b)}};ModulusFuncs.prototype.addTransactions=function(b,a,c){return this.transactionAddHtmlCall("getTransactionsHtml",b,a,c)};ModulusFuncs.prototype.transactionAddHtmlCall=function(c,b,a,d){c=c||"getTotalBalance";d=d||function(){};a=a||"";this.transactionReady(function(){if(typeof($modulus.transaction()[c])==="function"){$(b).html(a+$modulus.transaction()[c]());d()}})};ModulusFuncs.prototype.transactionAddBalanceCall=function(c,b,a,d){c=c||"getTotalBalance";d=d||function(){};a=a||"";this.transactionReady(function(){if(typeof($modulus.transaction()[c])==="function"){$(b).html(a+$modulus.getCurrency("html")+$modulus.transaction()[c]());d()}})};ModulusFuncs.prototype.addOfferHistory=function(b,a,c){return this.transactionAddHtmlCall("getOfferHistoryHtml",b,a,c)};ModulusFuncs.prototype.addContentOfferStatuses=function(b,a,c){return this.transactionAddHtmlCall("getContentOfferStatusesHtml",b,a,c)};ModulusFuncs.prototype.addAvailableBalance=function(b,a,c){return this.transactionAddBalanceCall("getAvailableBalance",b,a,c)};ModulusFuncs.prototype.addConfirmedPendingTotal=function(b,a,c){return this.transactionAddBalanceCall("getConfirmedPendingTotal",b,a,c)};ModulusFuncs.prototype.addBalance=function(b,a,c){return this.transactionAddBalanceCall("getBalance",b,a,c)};ModulusFuncs.prototype.addRejectedBalance=function(b,a,c){return this.transactionAddBalanceCall("getRejectedBalance",b,a,c)};ModulusFuncs.prototype.addTotalEarnedBalance=function(b,a,c){return this.transactionAddBalanceCall("getTotalEarnedBalance",b,a,c)};ModulusFuncs.prototype.addSearchBox=function(g,c,d,b,f){b=b||function(){};f=f||function(){};d=d||false;c=c||false;var e=this.stringGen(8,"SearchBox098789");var i="search-box-form-"+e;var h="search-box-"+e;var a='<div id="'+h+'" class="search-box"><form id="'+i+'" class="search-box-form"><input type="text" name="'+d+'" placeholder="search..."><button><i class="fa fa-search" aria-hidden="true"></i></button></form></div>';switch(c){case"before":$(g).before(a);break;case"prepend":$(g).prepend(a);break;case"append":$(g).append(a);break;case"after":$(g).after(a);break;default:$(g).html(a);break}if(this.isFunction(b)){$("#"+i+' input[name="'+d+'"]').on("keyup",function(){b(i,h,$("#"+i+' input[name="'+d+'"]').val())})}if(this.isFunction(f)){$("#"+i).on("submit",function(j){$modulus.browserPrevent(j);f(i,h,$("#"+i+' input[name="'+d+'"]').val())})}};ModulusFuncs.prototype.contentOfferSearch=function(c,b,a){b=b||function(){};a=a||function(){};$modulus=this;if(c.length){var d="function=search&term="+c;$modulus.ajaxCallback("content_offer_module",d,function(e){if($modulus.isset(e.search_result)){b(e.search_result)}else{a()}})}};ModulusFuncs.prototype.pageTools=function(){if(this.isFunction(modulusPageTools)){modulusPageTools()}};ModulusFuncs.prototype.isBool=function(a){if(typeof(a)==="boolean"){return true}return false};ModulusFuncs.prototype.sendAgreementAnswer=function(b,a,c){if(this.isBool(a)){if(a){a="yes"}else{a="no"}}c=c||function(){};$modulus.ajaxCallback("agreement_module",{"function":"post_sign_up_response",agreement_id:b,answer:a},c)};ModulusFuncs.prototype.showContactAgreement=function(){if(!this.isUserLoggedIn()||this.getGetVar("fulluser")){return}var a=this;a.ajaxCallback("agreement_module",{"function":"get_contact_html"},function(c){a.log(c);if(!a.isset(c.html)||c.html===0){return}a.formBox('<div id="agreements"></div>',"agree-box-outer",true);$("#agreements").html(c.html);var b=0;$(".agreement-section").each(function(){if(b==0){$(this).show()}else{$(this).hide()}b++;var d=$(this);d.find("button").click(function(){var f=$(this).data("agreement_id");var e="yes";if($(this).hasClass("agree-yes")){a.log("Yes");e="yes"}if($(this).hasClass("agree-no")){a.log("No");e="no"}a.sendAgreementAnswer(f,e);d.next(".agreement-section").fadeIn("slow");d.hide();b--;if(b==0){a.closeSiteAlert()}})})})};ModulusFuncs.prototype.initPostSignUpAgreements=function(){if(!this.isUserLoggedIn()||this.getGetVar("fulluser")){return}var a=this;a.ajaxCallback("agreement_module",{"function":"get_post_sign_up_html"},function(c){a.log(c);if(a.isset(c.html)&&c.html!=0){a.formBox('<div id="agreements"></div>',"agree-box-outer",true);$("#agreements").html(c.html);var b=0;$(".agreement-section").each(function(){if(b==0){$(this).show()}else{$(this).hide()}b++;var d=$(this);d.find("button").click(function(){var f=$(this).data("agreement_id");var e="yes";if($(this).hasClass("agree-yes")){a.log("Yes");e="yes"}if($(this).hasClass("agree-no")){a.log("No");e="no"}a.sendAgreementAnswer(f,e);d.next(".agreement-section").fadeIn("slow");d.hide();b--;if(b==0){a.closeSiteAlert()}})})}})};ModulusFuncs.prototype.initTutorial=function(a){a=a||function(){};if(this.isUserLoggedIn()){$modulus.ajaxCallback("tutorial_module",{"function":"get_overlay_html"},function(b){$("body").prepend(b.html);a()})}};ModulusFuncs.prototype.tutorialComplete=function(){if(this.isUserLoggedIn()){$modulus.ajaxCallback("tutorial_module",{"function":"tutorial_complete"},function(a){})}};ModulusFuncs.prototype.getViewPort=function(){var c=window,b="inner";if(!("innerWidth" in window)){b="client";c=document.documentElement||document.body}return{width:c[b+"Width"],height:c[b+"Height"]}};ModulusFuncs.prototype.setMetaData=function(b,e,a,d,f){if(!this.isUserLoggedIn()){return}f=f||function(){};var c="put";return this.ajaxCallback("metadata_module",{"function":c,key:b,value:e,link_key:a,link_value:d},f)};ModulusFuncs.prototype.getMetaData=function(a,b){if(!this.isUserLoggedIn()){return}b=b||function(){};return this.ajaxCallback("metadata_module",{"function":"get",key:a},b)};ModulusFuncs.prototype.displayFlashMessages=function(){var a=this.getCookie("modulus_flash_message");if(a){var c=false;var b=undefined;rawMessage=this.jsonDecode(decodeURIComponent(decodeURIComponent(a)));if(this.isset(rawMessage.message)){c=rawMessage.message}if(this.isset(rawMessage["class"])){b=rawMessage["class"]}if(c){this.siteAlert(decodeURIComponent(c).replace(/\+/g," "),b);this.setCookie("modulus_flash_message","",-100)}}};ModulusFuncs.prototype.log=function(){var b=window.$modulus||new ModulusFuncs();var a=(b.originalConsole&&(b.environment=="development"||b.getGetVar("console_log")));if(a){return Function.prototype.bind.call(console.log,console)}else{return function(){}}}();